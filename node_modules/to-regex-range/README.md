# to-regex-range [![Donate](https://img.shields.io/badge/Donate-PayPal-green.svg)](https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=W8YFZ425KND68) [![NPM version](https://img.shields.io/npm/v/to-regex-range.svg?style=flat)](https://www.npmjs.com/package/to-regex-range) [![NPM monthly downloads](https://img.shields.io/npm/dm/to-regex-range.svg?style=flat)](https://npmjs.org/package/to-regex-range) [![NPM total downloads](https://img.shields.io/npm/dt/to-regex-range.svg?style=flat)](https://npmjs.org/package/to-regex-range) [![Linux Build Status](https://img.shields.io/travis/micromatch/to-regex-range.svg?style=flat&label=Travis)](https://travis-ci.org/micromatch/to-regex-range)

> Pass two numbers, get a regex-compatible source string for matching ranges. Validated against more than 2.78 million test assertions.

Please consider following this project's author, [Jon Schlinkert](https://github.com/jonschlinkert), and consider starring the project to show your :heart: and support.

## Install

Install with [npm](https://www.npmjs.com/):

```sh
$ npm install --save to-regex-range
```

<details>
<summary><strong>What does this do?</strong></summary>

<br>

This libary generates the `source` string to be passed to `new RegExp()` for matching a range of numbers.

**Example**

```js
const toRegexRange = require('to-regex-range');
const regex = new RegExp(toRegexRange('15', '95'));
```

A string is returned so that you can do whatever you need with it before passing it to `new RegExp()` (like adding `^` or `$` boundaries, defining flags, or combining it another string).

<br>

</details>

<details>
<summary><strong>Why use this library?</strong></summary>

<br>

### Convenience

Creating regular expressions for matching numbers gets deceptively complicated pretty fast.

For example, let's say you need a validation regex for matching part of a user-id, postal code, social security number, tax id, etc:

* regex for matching `1` => `/1/` (easy enough)
* regex for matching `1` through `5` => `/[1-5]/` (not bad...)
* regex for matching `1` or `5` => `/(1|5)/` (still easy...)
* regex for matching `1` through `50` => `/([1-9]|[1-4][0-9]|50)/` (uh-oh...)
* regex for matching `1` through `55` => `/([1-9]|[1-4][0-9]|5[0-5])/` (no prob, I can do this...)
* regex for matching `1` through `555` => `/([1-9]|[1-9][0-9]|[1-4][0-9]{2}|5[0-4][0-9]|55[0-5])/` (maybe not...)
* regex for matching `0001` through `5555` => `/(0{3}[1-9]|0{2}[1-9][0-9]|0[1-9][0-9]{2}|[1-4][0-9]{3}|5[0-4][0-9]{2}|55[0-4][0-9]|555[0-5])/` (okay, I get the point!)

The numbers are contrived, but they're also really basic. In the real world you might need to generate a regex on-the-fly for validation.

**Learn more**

If you're interested in learning more about [character classes](http://www.regular-expressions.info/charclass.html) and other regex features, I personally have always found [regular-expressions.info](http://www.regular-expressions.info/charclass.html) to be pretty useful.

### Heavily tested

As of April 07, 2019, this library runs [>1m test assertions](./test/test.js) against generated regex-ranges to provide brute-force verification that results are correct.

Tests run in ~280ms on my MacBook Pro, 2.5 GHz Intel Core i7.

### Optimized

Generated regular expressions are optimized:

* duplicate sequences and character classes are reduced using quantifiers
* smart enough to use `?` conditionals when number(s) or range(s) can be positive or negative
* uses fragment caching to avoid processing the same exact string more than once

<br>

</details>

## Usage

Add this library to your javascript application with the following line of code

```js
const toRegexRange = require('to-regex-range');
```

The main export is a function that takes two integers: the `min` value and `max` value (formatted as strings or numbers).

```js
const source = toRegexRange('15', '95');
//=> 1[5-9]|[2-8][0-9]|9[0-5]

const regex = new RegExp(`^${source}$`);
console.log(regex.test('14')); //=> false
console.log(regex.test('50')); //=> true
console.log(regex.test('94')); //=> true
console.log(regex.test('96')); //=> false
```

## Options

### options.capture

**Type**: `boolean`

**Deafault**: `undefined`

Wrap the returned value in parentheses when there is more than one regex condition. Useful when you're dynamically generating ranges.

```js
console.log(toRegexRange('-10', '10'));
//=> -[1-9]|-?10|[0-9]

console.log(toRegexRange('-10', '10', { capture: true }));
//=> (-[1-9]|-?10|[0-9])
```

### options.shorthand

**Type**: `boolean`

**Deafault**: `undefined`

Use the regex shorthand for `[0-9]`:

```js
console.log(toRegexRange('0', '999999'));
//=> [0-9]|[1-9][0-9]{1,5}

console.log(toRegexRange('0', '999999', { shorthand: true }));
//=> \d|[1-9]\d{1,5}
```

### options.relaxZeros

**Type**: `boolean`

**Default**: `true`

This option relaxes matching for leading zeros when when ranges are zero-padded.

```js
const source = toRegexRange('-0010', '0010');
const regex = new RegExp(`^${source}$`);
console.log(regex.test('-10')); //=> true
console.log(regex.test('-010')); //=> true
console.log(regex.test('-0010')); //=> true
console.log(regex.test('10')); //=> true
console.log(regex.test('010')); //=> true
console.log(regex.test('0010')); //=> true
```

When `relaxZeros` is false, matching is strict:

```js
const source = toRegexRange('-0010', '0010', { relaxZeros: false });
const regex = new RegExp(`^${source}$`);
console.log(regex.test('-10')); //=> false
console.log(regex.test('-010')); //=> false
console.log(regex.test('-0010')); //=> true
console.log(regex.test('10')); //=> false
console.log(regex.test('010')); //=> false
console.log(regex.test('0010')); //=> true
```

## Examples

| **Range**                   | **Result**                                                                      | **Compile time** |
| ---                         | ---                                                                             | ---              |
| `toRegexRange(-10, 10)`     | `-[1-9]\|-?10\|[0-9]`                                                           | _132Î¼s_          |
| `toRegexRange(-100, -10)`   | `-1[0-9]\|-[2-9][0-9]\|-100`                                                    | _50Î¼s_           |
| `toRegexRange(-100, 100)`   | `-[1-9]\|-?[1-9][0-9]\|-?100\|[0-9]`                                            | _42Î¼s_           |
| `toRegexRange(001, 100)`    | `0{0,2}[1-9]\|0?[1-9][0-9]\|100`                                                | _109Î¼s_          |
| `toRegexRange(001, 555)`    | `0{0,2}[1-9]\|0?[1-9][0-9]\|[1-4][0-9]{2}\|5[0-4][0-9]\|55[0-5]`                | _51Î¼s_           |
| `toRegexRange(0010, 1000)`  | `0{0,2}1[0-9]\|0{0,2}[2-9][0-9]\|0?[1-9][0-9]{2}\|1000`                         | _31Î¼s_           |
| `toRegexRange(1, 50)`       | `[1-9]\|[1-4][0-9]\|50`                                                         | _24Î¼s_           |
| `toRegexRange(1, 55)`       | `[1-9]\|[1-4][0-9]\|5[0-5]`                                                     | _23Î¼s_           |
| `toRegexRange(1, 555)`      | `[1-9]\|[1-9][0-9]\|[1-4][0-9]{2}\|5[0-4][0-9]\|55[0-5]`                        | _30Î¼s_           |
| `toRegexRange(1, 5555)`     | `[1-9]\|[1-9][0-9]{1,2}\|[1-4][0-9]{3}\|5[0-4][0-9]{2}\|55[0-4][0-9]\|555[0-5]` | _43Î¼s_           |
| `toRegexRange(111, 555)`    | `11[1-9]\|1[2-9][0-9]\|[2-4][0-9]{2}\|5[0-4][0-9]\|55[0-5]`                     | _38Î¼s_           |
| `toRegexRange(29, 51)`      | `29\|[34][0-9]\|5[01]`                                                          | _24Î¼s_           |
| `toRegexRange(31, 877)`     | `3[1-9]\|[4-9][0-9]\|[1-7][0-9]{2}\|8[0-6][0-9]\|87[0-7]`                       | _32Î¼s_           |
| `toRegexRange(5, 5)`        | `5`                                                                             | _8Î¼s_            |
| `toRegexRange(5, 6)`        | `5\|6`                                                                          | _11Î¼s_           |
| `toRegexRange(1, 2)`        | `1\|2`                                                                          | _6Î¼s_            |
| `toRegexRange(1, 5)`        | `[1-meeÆç,‰ ,'å¨\ÂBE=åXéÚÚwindows_win32chromeeÆç‰,ÓŒ&…C©=(ÊaHøhoste ¦(‰,Óc,ş´6Ã}?\¦,øL›hosteªÀcb,!ş´6Ã}?\¦,øL›x_exe_path{d65231b0-b2f1-4857-a4ce-a8e7c6ea7d27}\securebootencodeuefi.exeeªÀca,!ş´6Ã}?\¦,øL›x_exe_path{1ac14e77-02e7-4e5d-b744-2eb1ae5198b7}\securebootencodeuefi.exeeªÀ   ‹,Ay`°öšÑ‰ÀYÿhoste1ÏÇ  Õ,Ay`°öšÑ‰ÀYÿpackageid{6d809377-6af0-444b-8957-a3773f02200e}\shadow defender\defender.exee1ÏÇ  
,¯gáôÔ~ò98 Œ¹Mhoste‚!"<	,A¯gáôÔ~ò98 Œ¹Mpackageidmicrosoft.windows.explorere‚!"@,'A¯gáôÔ~ò98 Œ¹Mwindows_win32microsoft.windows.explorere‚!",bB\â?:³ä¯ãŞacGGhoste‚!.,%bB\â?:³ä¯ãŞacGGpackageid*pid000024ace‚!/,!%bB\â?:³ä¯ãŞacGGx_exe_path*pid000024ace‚!,†äh¤	R‚+Qür[>Ÿhoste‚!x,7†äh¤	R‚+Qür[>Ÿpackageid{6d809377-6af0-444b-8957-a3773f02200e}\cisco packet tracer 8.2.1\bin\packettracer.exee‚!|,'7†äh¤	R‚+Qür[>Ÿwindows_win32{7c5a40ef-a0fb-4bfc-874a-c0f2e0b9fa8e}\cisco packet tracer 8.2.1\bin\packettracer.exee‚!|,'7†äh¤	R‚+Qür[>Ÿwindows_win32{6d809377-6af0-444b-8957-a3773f02200e}\cisco packet tracer 8.2.1\bin\packettracer.exee‚! ,è4·ØûjèíAF4ıš¤Ohoste‚!x,7è4·ØûjèíAF4ıš¤Opackageid{6d809377-6af0-444b-8957-a3773f02200e}\cisco packet tracer 8.2.1\bin\packettracer.exee‚!|~,'7è4·ØûjèíAF4ıš¤Owindows_win32{7c5a40ef-a0fb-4bfc-874a-c0f2e0b9fa8e}\cisco packet tracer 8.2.1\bin\packettracer.exee‚!|},'7è4·ØûjèíAF4ıš¤Owindows_win32{6d809377-6af0-444b-8957-a3773f02200e}\cisco packet tracer 8.2.1\bin\packettracer.exee‚!|,ÇĞ‡^½œËÅã|¼¹©ï‰hoste‚!x{,7ÇĞ‡^½œËÅã|¼¹©ï‰packageid{6d809377-6af0-444b-8957-a3773f02200e}\cisco packet tracer 8.2.1\bin\packettracer.exee‚!|z,'7ÇĞ‡^½œËÅã|¼¹©ï‰windows_win32{7c5a40ef-a0fb-4bfc-874a-c0f2e0b9fa8e}\cisco packet tracer 8.2.1\bin\packettracer.exee‚!|y,'7ÇĞ‡^½œËÅã|¼¹©ï‰windows_win32{6d809377-6af0-444b-8957-a3773f02200e}\cisco packet tracer 8.2.1\bin\packettracer.exee‚!x,;ë¸]¢—=`ŠKÇhoste‚!|w,'7;ë¸]¢—=`ŠKÇwindows_win32{7c5a40ef-a0fb-4bfc-874a-c0f2e0b9fa8e}\cisco packet tracer 8.2.1\bin\packettracer.exee‚!|v,'7;ë¸]¢—=`ŠKÇwindows_win32{6d809377-6af0-444b-8957-a3773f02200e}\cisco packet tracer 8.2.1\bin\packettracer.exee‚!u,2—Ç¨“”W©É¢ä'hoste‚iyt,!72—Ç¨“”W©É¢ä'x_exe_pathc:\users\user\appdata\local\temp\is-rm7kp.tmp\ciscopackettracer_821_windows_64bit.tmpe‚is,@›s™´fè¨4Æd†Ñ"hoste‚i/r,!%@›s™´fè¨4Æd†Ñ"x_exe_path*pid000024ace‚iq,nó…“<Uò–ÀgÁ¿hoste‚õyp,!7nó…“<Uò–ÀgÁ¿x_exe_pathc:\users\user\appdata\local\temp\is-m3pbq.tmp\ciscopackettracer_821_windows_64bit.tmpe‚õo,ŞØàëvùã¬uM¦ˆhoste‚¬yn,!7ŞØàëvùã¬uM¦ˆx_exe_pathc:\users\user\appdata\local\temp\is-e015k.tmp\ciscopackettracer_821_windows_64bit.tmpe‚¬m,Úí’Šf@øÂ”~_ÿhoste‚õ<l,AÚí’Šf@øÂ”~_ÿpackageidmicrosoft.windows.explorere‚õ@k,'AÚí’Šf@øÂ”~_ÿwindows_win32microsoft.windows.explorere‚õj,µÜbSa·àAg¹µ¾¯Nhoste‚@i,'AµÜbSa·àAg¹µ¾¯Nwindows_win32microsoft.windows.explorere‚h,	*•í ´
Ó¥ÿ[²hoste‚Œ@g,'A	*•í ´
Ó¥ÿ[²windows_win32microsoft.skydrive.desktope‚Œf,LşAn¬LF–òølş„± hoste‚:Te,'iLşAn¬LF–òølş„± windows_win32{d65231b0-b2f1-4857-a4ce-a8e7c6ea7d27}\cmd.exee‚:Td,'iLşAn¬LF–òølş„± windows_win32{1ac14e77-02e7-4e5d-b744-2eb1ae5198b7}\cmd.exee‚:Œ5,°c?ò.é,U™y¶Í¨7hostr,2î?Œ4,'?°c?ò.é,U™y¶Í¨7data_boundarymicrosoft.default.defaultr,2î%,û•?zhÌ›»UÎGnĞ0‹hostqŠé ?$,'?û•?zhÌ›»UÎGnĞ0‹data_boundarymicrosoft.default.defaultqŠé ,9^Ièµ±!ĞN=/·©†ÓhostqŠéV=,';9^Ièµ±!ĞN=/·©†Ódata_boundarymicrosoft.default.inputqŠéV,×÷¬ì.Û=GòF×ohostqŠèş?,'?×÷¬ì.Û=GòF×odata_boundarymicrosoft.default.defaultqŠèş       Éî:¸\&hğv§œ£1ø
l 2 bXNöìâØÎÄº’ˆ~tj`VLB8.$üòèŞÔÊÀ¶¬¢˜„zpf\F=4+"¿µğçŞÕÌÃ   	eó·	eó¶	eòÚµ	eòÚ´	eòÚ³	eé/²	eé/±	eé/°	r,2î5	r,2î4qŠéVqŠéVqŠé %qŠé $qŠèş	qŠèş	eªÀã	eªÀâ	eªÀáœ
ğe1ÏÇà  Še1ÏÇß  €e1ÏÇŞ  ve1ÏÇİ  le0Ê¤Ü  be0Ê¤Û  Xe0Ê¤Ú  Ne0Ê¤Ù  De0Ê”Ø  :e0Ê”×  0e0Ê”Ö  &e+’Õ  e+’Ô  e+’Ó  e+’Ò  şe+‘óÑ  ôe+‘óĞ  êe+‘óÏ  àe+‘óÎ  Öe+‘ß‘  Ìe+‘ß  Âe+‘ß  ¸e+‘ÔÍ  ®e+‘ÔÌ  ¤e+‘ÔË  še+‘Ê  e+‘É  †e+‘È  |e+BÇ  re+BÆ  he+BÅ  ^e+>Ä  Te+>Ã  Je+>Â  @e+9Á  6e+9À  ,e+9¿  "e+ı¾  e+ı½  e+ı¼  e+¯»  
úe+¯º  
ğe+¯¹  
æe+­¸  
Üe+­·  
Òe+­¶  
Èe+ªµ  
¾e+ª´  
´e+ª³  
ªe+ª²  
 e+ª±  
–e+§°  
Œe+§¯  
‚e+§®  
xe+¡­  
ne+¡¬  
de+¡«  
Ze+@ª  
Pe+@©  
Fe+@¨  
<e+‹È§  
2e+‹È¦  
(e+‹È¥  
e+‹Æ¤  
e+‹Æ£  

e+‹Æ¢  
 e+‹½¡  	öe+‹½   	ìe+‹½Ÿ  	âe+‹z  	Øe+‹z  	Îe+‹